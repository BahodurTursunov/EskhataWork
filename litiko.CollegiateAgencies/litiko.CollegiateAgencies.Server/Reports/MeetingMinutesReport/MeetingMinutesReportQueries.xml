<?xml version="1.0" encoding="utf-8"?>
<queries>
  <query key="ReportData">
    <postgres><![CDATA[SELECT
    meetingMinutes."Id" AS "MeetingMinutesId",
    meetingMinutes."RegNumber_Docflow_Sungero" AS "MeetingMinutesRegNumber",
    meetingMinutes."RegDate_Docflow_Sungero" AS "MeetingMinutesRegDate",
    meetingMinutes."Name" AS "MeetingMinutesName",
    meetingMinutes."MinutesMeeting_Meeting_Sungero" AS "MeetingId",
    meeting."Name" AS "MeetingName",
    meeting."Category_Eskhata_litiko" AS "MeetingCategoryId",
    -- Concatenating project solutions with row numbers
    REPLACE(
        (
            SELECT STRING_AGG(
                CAST(ROW_NUMBER() OVER (ORDER BY meetingProjectSolution."Id") AS TEXT) || '. ' || projectSolution."Name", 
                E'\n'
            )
            FROM "litiko_Eskhata_MeetingPS" AS meetingProjectSolution
            LEFT JOIN "Sungero_Content_EDoc" AS projectSolution 
                ON meetingProjectSolution."ProjectSolutio" = projectSolution."Id"
            WHERE meetingProjectSolution."Meeting" = meeting."Id"
        ), 
        E'\n', '<br>'
    ) AS "Description"
FROM "Sungero_Content_EDoc" AS meetingMinutes
LEFT JOIN "Sungero_Meeting_Meeting" AS meeting ON meetingMinutes."MinutesMeeting_Meeting_Sungero" = meeting."Id"
WHERE 
    meetingMinutes."Discriminator" = 'BB4780FF-B2C3-4044-A390-E9E110791BF6'
    AND meetingMinutes."RegDate_Docflow_Sungero" BETWEEN @MeetingMinutesDateFrom AND @MeetingMinutesDateTo
    AND meeting."Category_Eskhata_litiko" = @MeetingCategoryId
ORDER BY meetingMinutes."Id";]]></postgres>
  </query>
</queries>