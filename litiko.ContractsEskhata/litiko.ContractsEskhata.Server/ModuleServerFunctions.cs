using System;
using System.Collections.Generic;
using System.Linq;
using Sungero.Core;
using Sungero.CoreEntities;
using System.Net.Http;
using System.Net.Http.Headers;
using System.Xml.Linq;
using System.Threading;
using System.Threading.Tasks;
using System.Net;
using litiko.Integration;
namespace litiko.ContractsEskhata.Server
{
  public class ModuleFunctions
  {
    [Public(WebApiRequestType = RequestType.Post)]
    public string ResponseToGetCountries(/*IIntegrationMethod method, IExchangeDocument exchDoc, long lastId*/)
    {
      var requestUrl = "10.10.2.53:9850";
      
      string applicationKey = "172.20.70.75:80/Integration/Odata/Integration/ProcessResponseFromIS##";
      
      var xmlRequestBody = string.Empty;

      using (HttpClient client = new HttpClient())
      {
        client.DefaultRequestHeaders.Accept.Clear();
        client.DefaultRequestHeaders.Accept.Add(new System.Net.Http.Headers.MediaTypeWithQualityHeaderValue("application/xml"));

        StringContent content = new StringContent(responseXML, Encoding.UTF8, "application/xml");

        HttpResponseMessage response = client.PostAsync(requestUrl, responseXML).Result;
        response.EnsureSuccessStatusCode();

      }
    }
  }
}